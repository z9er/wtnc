<style>
  /* Custom link colors */
  a {
    color: #67B7D1;
  }
  
  a:hover {
    color: #89c9e3;
  }
  
  /* Navigation links */
  .site-nav .nav-list-link {
    color: #67B7D1;
  }
  
  /* Aux nav links (Collection Page, Discord) */
  .site-header .aux-nav a {
    color: #67B7D1;
  }
  
  /* Active navigation item */
  .nav-list-item .nav-list-link.active {
    color: #67B7D1;
  }
  
  /* Force FAQ to be expanded */
  .nav-list-item:has(a[href*="/faq/"]) > ul.nav-list {
    display: block !important;
  }
  
  /* Hide the FAQ expander arrow */
  .nav-list-item:has(a[href*="/faq/"]) > .nav-list-expander {
    display: none !important;
  }
  
  /* Set initial expanded state for NMA, Wabbajack, and Vortex */
  .nav-list-item:has(a[href*="/nma/"]) > ul.nav-list:not(.nav-list-top),
  .nav-list-item:has(a[href*="/wabbajack/"]) > ul.nav-list:not(.nav-list-top),
  .nav-list-item:has(a[href*="/vortex/"]) > ul.nav-list:not(.nav-list-top) {
    display: block;
  }
  
  /* Ensure the expander arrows show the correct state initially */
  .nav-list-item:has(a[href*="/nma/"]) > .nav-list-expander[aria-expanded="false"] svg,
  .nav-list-item:has(a[href*="/wabbajack/"]) > .nav-list-expander[aria-expanded="false"] svg,
  .nav-list-item:has(a[href*="/vortex/"]) > .nav-list-expander[aria-expanded="false"] svg {
    transform: rotate(-90deg);
  }
  
  /* Make parent links clickable for collapsing/expanding */
  .nav-list-item > a[href$="/nma/"],
  .nav-list-item > a[href$="/wabbajack/"],
  .nav-list-item > a[href$="/vortex/"] {
    cursor: pointer;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Auto-expand sections on load
    setTimeout(function() {
      const sectionsToExpand = ['nma', 'wabbajack', 'vortex'];
      
      sectionsToExpand.forEach(function(section) {
        const link = document.querySelector('a[href$="/' + section + '/"]');
        if (link) {
          const navItem = link.closest('.nav-list-item');
          const expander = navItem ? navItem.querySelector('.nav-list-expander') : null;
          
          if (expander && expander.getAttribute('aria-expanded') === 'false') {
            expander.click();
          }
        }
      });
    }, 200);
    
    // Handle click behavior - toggle if expanded, navigate if collapsed
    setTimeout(function() {
      const parentLinks = document.querySelectorAll('a[href$="/nma/"], a[href$="/wabbajack/"], a[href$="/vortex/"]');
      
      parentLinks.forEach(function(link) {
        // Store original href
        const originalHref = link.href;
        
        link.addEventListener('click', function(e) {
          const navItem = link.closest('.nav-list-item');
          const expander = navItem ? navItem.querySelector('.nav-list-expander') : null;
          const childList = navItem ? navItem.querySelector(':scope > ul.nav-list') : null;
          
          if (expander && childList) {
            // Multiple ways to check if expanded
            const expanderExpanded = expander.getAttribute('aria-expanded') === 'true';
            const listVisible = window.getComputedStyle(childList).display !== 'none';
            const isExpanded = expanderExpanded || listVisible;
            
            if (isExpanded) {
              // Prevent navigation and collapse
              e.preventDefault();
              e.stopPropagation();
              expander.click();
              return false;
            }
          }
          // If collapsed or no expander, allow normal navigation
        });
      });
    }, 300);
  });
</script>
